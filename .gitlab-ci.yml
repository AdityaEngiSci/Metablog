stages:
  - build
  - test

build-backend:
  stage: build
  # image: maven:latest
  image: maven:eclipse-temurin
  before_script:
      - cd metaBlog-backend
  tags:
    - dalfcs_docker_kvm
  script:
    - echo "Starting backend build......"
    - mvn clean install
    - echo "Compile complete."
    - echo "Backend build completed"
  artifacts:
    paths: 
      - metaBlog-backend/target

build-frontend:
  stage: build
  image: node:latest
  tags:
    - dalfcs_docker_kvm
  before_script:
    - cd metablog-frontend
    - npm install
    - npm i react-icons
  script:
    - echo "Frontend building started......"
    - npm run build
  artifacts:
    paths:
      - metablog-frontend/build

test-backend:
    stage: test
    # image: maven:latest
    image: maven:eclipse-temurin
    tags:
    - dalfcs_docker_kvm
    before_script: 
        - cd metaBlog-backend
    script:
        - echo "backend testing started......"
        - mvn test
        - echo "backedn testing completed......"
